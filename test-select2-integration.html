<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Select2 Integration - Mimer Forms</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; }
        .test-info { background: #e7f3ff; padding: 15px; border-left: 4px solid #007cba; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        select { width: 100%; padding: 10px; font-size: 14px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    </style>
</head>
<body>
    <div class="test-info">
        <h3>üé® Test Select2 Integration</h3>
        <p><strong>Prop√≥sito:</strong> Verificar que Select2 se aplica correctamente a los selectores de formularios simulando Elementor.</p>
        <p><strong>Configuraci√≥n:</strong> Esta p√°gina simula la estructura de Elementor para probar el Select2 handler.</p>
    </div>

    <h2>Formulario de Prueba - Select2</h2>
    
    <!-- Simular estructura de Elementor -->
    <form class="elementor-form">
        <div class="form-group">
            <label for="test-select-few">Select con pocas opciones (sin b√∫squeda):</label>
            <select id="test-select-few" name="test_select_few">
                <option value="">-- Select --</option>
                <option value="option1">Opci√≥n 1</option>
                <option value="option2">Opci√≥n 2</option>
                <option value="option3">Opci√≥n 3</option>
            </select>
        </div>

        <div class="form-group">
            <label for="test-select-many">Select con muchas opciones (con b√∫squeda):</label>
            <select id="test-select-many" name="test_select_many">
                <option value="">-- Select --</option>
                <option value="option1">Non-Hodgkin's Lymphoma</option>
                <option value="option2">Leukemia</option>
                <option value="option3">Multiple Myeloma</option>
                <option value="option4">Breast Cancer</option>
                <option value="option5">Lung Cancer</option>
                <option value="option6">Skin Issues</option>
                <option value="option7">Bone Loss</option>
                <option value="option8">Blood Clots</option>
                <option value="option9">Other Cancer</option>
                <option value="option10">Other Issues</option>
            </select>
        </div>

        <div class="form-group">
            <label for="case-attorney">Do you have an attorney?</label>
            <select id="case-attorney" name="case_attorney">
                <option value="">-- Select --</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
    </form>

    <!-- Status de la integraci√≥n -->
    <div id="status-container">
        <div class="status info">
            <strong>üìä Estado de la integraci√≥n:</strong>
            <div id="integration-status">Verificando...</div>
        </div>
    </div>

    <!-- Informaci√≥n adicional -->
    <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 6px;">
        <h4>‚ÑπÔ∏è Informaci√≥n de Prueba</h4>
        <ul>
            <li><strong>Select2 Version:</strong> <span id="select2-version">Checking...</span></li>
            <li><strong>jQuery Version:</strong> <span id="jquery-version">Checking...</span></li>
            <li><strong>Selects Detectados:</strong> <span id="selects-count">Counting...</span></li>
            <li><strong>Select2 Aplicado:</strong> <span id="select2-applied">Checking...</span></li>
        </ul>
    </div>

    <!-- Load jQuery and Select2 manually for testing -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        jQuery(document).ready(function($) {
            // Informaci√≥n de versiones
            $('#jquery-version').text($().jquery || 'No detectado');
            $('#select2-version').text($.fn.select2 ? '4.1.0-rc.0' : 'No detectado');
            $('#selects-count').text($('.elementor-form select').length);

            // Simular el comportamiento del plugin
            function initializeSelect2() {
                $('.elementor-form select').each(function() {
                    var $select = $(this);
                    
                    if ($select.hasClass('select2-hidden-accessible')) {
                        return;
                    }
                    
                    var optionCount = $select.find('option').length;
                    var searchThreshold = 5;
                    
                    var select2Config = {
                        width: '100%',
                        minimumResultsForSearch: optionCount >= searchThreshold ? 0 : Infinity,
                        placeholder: 'Select an option...',
                        allowClear: false
                    };
                    
                    $select.select2(select2Config);
                });
            }

            // Aplicar Select2
            if ($.fn.select2) {
                initializeSelect2();
                
                setTimeout(function() {
                    var appliedCount = $('.select2-hidden-accessible').length;
                    $('#select2-applied').text(appliedCount + ' de ' + $('.elementor-form select').length);
                    
                    if (appliedCount > 0) {
                        $('#integration-status').html('‚úÖ <strong>Select2 aplicado correctamente</strong> - Selectores mejorados funcionando');
                        $('.status').removeClass('info').addClass('success');
                    } else {
                        $('#integration-status').html('‚ùå <strong>Select2 no aplicado</strong> - Revisar configuraci√≥n');
                        $('.status').removeClass('info').addClass('warning');
                    }
                }, 500);
                
                console.log('üé® Select2 test initialized');
            } else {
                $('#integration-status').html('‚ùå <strong>Select2 no cargado</strong> - Biblioteca no disponible');
                $('.status').removeClass('info').addClass('warning');
            }
        });
    </script>

    <!-- Estilos personalizados similares al plugin -->
    <style>
        .select2-container .select2-selection--single {
            height: 44px !important;
            border: 1px solid #e1e5e9 !important;
            border-radius: 6px !important;
            background: #ffffff !important;
        }
        
        .select2-container .select2-selection--single .select2-selection__rendered {
            line-height: 42px !important;
            padding-left: 12px !important;
            color: #333333 !important;
            font-size: 14px !important;
        }
        
        .select2-container .select2-selection--single .select2-selection__arrow {
            height: 42px !important;
            right: 8px !important;
        }
        
        .select2-container .select2-selection--single:hover {
            border-color: #007cba !important;
        }
        
        .select2-container--open .select2-selection--single {
            border-color: #007cba !important;
            box-shadow: 0 0 0 2px rgba(0, 124, 186, 0.2) !important;
        }
        
        .select2-dropdown {
            border: 1px solid #e1e5e9 !important;
            border-radius: 6px !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
        }
        
        .select2-results__option--highlighted {
            background-color: #007cba !important;
        }
    </style>
</body>
</html>
