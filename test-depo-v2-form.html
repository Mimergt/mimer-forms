<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Depo Provera V2 Form</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #ddd; }
        .field { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; }
        button { background: #0073aa; color: white; padding: 12px 24px; border: none; cursor: pointer; }
        .test-info { background: #e7f3ff; padding: 15px; margin-bottom: 20px; border-left: 4px solid #0073aa; }
        .api-info { background: #fff3cd; padding: 15px; margin-bottom: 20px; border-left: 4px solid #ffc107; }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="test-info">
            <h3>üß™ Test Depo Provera V2 Form</h3>
            <p><strong>Form ID:</strong> <code>dp_formv2</code></p>
            <p><strong>Detection Field:</strong> <code>case_depo_provera_taken</code></p>
            <p><strong>Objetivo:</strong> Verificar que este formulario se detecta como Depo V2 y se env√≠a a la nueva URL.</p>
        </div>

        <div class="api-info">
            <h4>üì° API Configuration</h4>
            <p><strong>URL:</strong> <code>https://api.valuedirectinc.com/api/submissions?form=zm-ir-lca-depo-post&team=vdi&user=ee5a1aba-6009-4d58-8a16-3810e2f777ad&signature=254365aae9e577ab0d20b73f377596736460fd5f38464cb2ffd684a4889fcb44</code></p>
            <p><strong>M√©todo:</strong> POST (form-data)</p>
            <p><strong>Diferencia con V1:</strong> Solo cambia el par√°metro <code>form=zm-ir-lca-depo-post</code> vs <code>form=ir-lca-depo-post</code></p>
        </div>

        <!-- Form con ID espec√≠fico dp_formv2 -->
        <form id="dp_formv2" method="POST" action="/test-endpoint">
            <h2>Depo Provera V2 Form Test</h2>

            <div class="field">
                <label for="lead_first_name">First Name *</label>
                <input type="text" name="lead_first_name" id="lead_first_name" value="John" required>
            </div>

            <div class="field">
                <label for="lead_last_name">Last Name *</label>
                <input type="text" name="lead_last_name" id="lead_last_name" value="Doe" required>
            </div>

            <div class="field">
                <label for="lead_email">Email *</label>
                <input type="email" name="lead_email" id="lead_email" value="john.doe@email.com" required>
            </div>

            <div class="field">
                <label for="lead_phone">Phone *</label>
                <input type="tel" name="lead_phone" id="lead_phone" value="555-123-4567" required>
            </div>

            <div class="field">
                <label for="lead_zip_code">ZIP Code *</label>
                <input type="text" name="lead_zip_code" id="lead_zip_code" value="90210" maxlength="5" required>
            </div>

            <!-- CAMPO DE DETECCI√ìN CLAVE para Depo Provera -->
            <div class="field">
                <label for="case_depo_provera_taken">Have you taken Depo Provera? *</label>
                <select name="case_depo_provera_taken" id="case_depo_provera_taken" required>
                    <option value="">--select--</option>
                    <option value="Yes" selected>Yes</option>
                    <option value="No">No</option>
                </select>
            </div>

            <div class="field">
                <label for="case_depo_provera_use">For how long did you use Depo Provera? *</label>
                <select name="case_depo_provera_use" id="case_depo_provera_use" required>
                    <option value="">--select--</option>
                    <option value="1-6 months">1-6 months</option>
                    <option value="7-12 months" selected>7-12 months</option>
                    <option value="1-2 years">1-2 years</option>
                    <option value="More than 2 years">More than 2 years</option>
                </select>
            </div>

            <div class="field">
                <label for="case_injury">What injury/condition do you have? *</label>
                <select name="case_injury" id="case_injury" required>
                    <option value="">--select--</option>
                    <option value="Bone loss/osteoporosis" selected>Bone loss/osteoporosis</option>
                    <option value="Fractures">Fractures</option>
                    <option value="Other bone related injury">Other bone related injury</option>
                </select>
            </div>

            <div class="field">
                <label for="case_description">Brief description of your case</label>
                <textarea name="case_description" id="case_description" rows="4">I suffered bone loss after using Depo Provera for over a year.</textarea>
            </div>

            <div class="field">
                <label for="case_attorney">Do you currently have an attorney? *</label>
                <select name="case_attorney" id="case_attorney" required>
                    <option value="">--select--</option>
                    <option value="Yes">Yes</option>
                    <option value="No" selected>No</option>
                </select>
            </div>

            <!-- Hidden fields -->
            <input type="hidden" name="xxTrustedFormToken" value="test-trusted-form-token-v2">
            <input type="hidden" name="action" value="elementor_pro_forms_send_form">
            <input type="hidden" name="referrer" value="https://example.com/depo-v2-form">

            <div style="margin-top: 20px; padding: 15px; background: #f0f0f0;">
                <h4>üîç Debug Info:</h4>
                <p><strong>Form ID:</strong> <span id="form-id-display">dp_formv2</span></p>
                <p><strong>Detection Method:</strong> Form ID + case_depo_provera_taken field</p>
                <p><strong>Expected Result:</strong> Should be detected as "Depo V2" and sent to the new API URL</p>
                <p><strong>Log Entry:</strong> "üéØ Detectado formulario DEPO PROVERA V2 (ID: dp_formv2) - enviando..."</p>
            </div>

            <button type="submit">Submit Depo V2 Test Form</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mostrar el ID del formulario detectado
            const form = document.getElementById('dp_formv2');
            if (form) {
                document.getElementById('form-id-display').textContent = form.id;
                console.log('‚úÖ Depo V2 Form detected with ID:', form.id);
                console.log('‚úÖ Detection field present:', document.getElementById('case_depo_provera_taken') ? 'YES' : 'NO');
                
                // Simular env√≠o de formulario (solo para testing)
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    console.log('üß™ Form submission intercepted for testing');
                    console.log('Form data would be processed by Mimer Forms VDI plugin');
                    console.log('Expected API endpoint: zm-ir-lca-depo-post (V2)');
                    alert('üß™ Test form submitted!\n\nCheck the WordPress log.txt file to see if it was detected as "Depo V2".');
                });
            }
        });
    </script>
</body>
</html>